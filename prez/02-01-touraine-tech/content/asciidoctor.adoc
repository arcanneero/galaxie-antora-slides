[state=h_background clavier]
= Asciidoc(tor)

image::images/asciidoc.png[width=20%]

üê¶ @asciidoctor

[NOTE.speaker]
====
[G]
Utilis√© par des gros projets : hibernate / fedora

Spec Asciidoc : Vient d'int√©grer la fondation Eclipse (7 Janvier 2019)
====

== Pourquoi cet outil ?


[NOTE.speaker]
====
[N] Volont√© d'aller vers la doc as code.
De rapprocher la doc du code (dans les d√©p√¥ts git)

Deux vrai possibilit√© : Markdown vs Asciidoctor

D√©finir les deux :::
- balisage faible
- proche d'un format wiki

====

== Exemple de syntaxe

[source,adoc]
----
= Un titre
== Un sous-titre

[WARNING]
--
Un warning multi-lignes

* item 1
* item 2
--

----

[NOTE.speaker]
====

[G] 

- Quelques simplicit√© syntaxiques
- Gestion dans un Git
- Pas de probl√®me de flavours (spec Asciidoc)
- Insertion de fragment de fichier
- Syntaxe plus coh√©rente
- Les devs ont les droits !
====

== Parce que la doc ce n'est pas toujours un long fleuve tranquille...

[NOTE.speaker]
====
[G]

La doc as code, ca pose quand m√™me des probl√®mes qu'on a pas autrement...
====

[state=v_background nappes]
==  Build & deploy

[NOTE.speaker]
====
[N] En Ruby, mais...

Accessible √† tous, grace √† JRuby ou JS (merci au transpiler http://opalrb.com/)
====

==  Gradle

```groovy

asciidoctor {
    backends 'html5', 'pdf'
    dependsOn clean
    sourceDir = file('src/asciidoc')
    sources {
        include '**/*.adoc'
        exclude '**/content/**'
    }
    resources {
        from (sourceDir) {
            include '**/resources/**'
        }
    }
    outputDir = file('build/docs')
}
```

[NOTE.speaker]
====
[N]

Mise en place de build avec Graddle :::
- Syntaxe ulta simple
- G√©n√©ration de PDF
====

==  Dockerfile

```
FROM nginx

COPY build/docs/html5 /usr/share/nginx/html
```

[NOTE.speaker]
====
[G]

D√©ploiement Continue - Jenkins / Docker / NginX
====

==  Mais nos d√©p√¥ts deviennent bord√©liques

image::images/sacdenoeuds.jpg[]

[NOTE.speaker]
====
Mais nos d√©p√¥ts deviennent bord√©liques. 

=> Expliquer pourquoi c'est devenu bord√©lique.
====

[state=v_background neurone]
==  Une structuration partag√©e

[NOTE.speaker]
====
[N]

- Plusieurs projets sur un plateau
- Pourquoi ne pas avoir une base commune ?
- Ce sont finalement les m√™mes questqion qu'avec une doc traditionnelle

Convention over configuration
====

== !

image::images/structure.png[width=80%]

[NOTE.speaker]
====
* D√©marrage - Quickstart
* Environnements - Environments
* Recommandations - Guidelines
* Manuels - How to

Mais c'est une doc orient√© produit.
Il y a d'autre besoins dans la vie d'un projet.
====

=B!

image::images/structure-2.png[width=80%]

== Et si on avait plusieurs d√©p√¥ts ?

[NOTE.speaker]
====
[N]

Comment la probl√©matique d'agr√©gation a √©t√© prise en compte :::
- D√©pot sous format zip des √©l√©ments g√©n√©r√©s
- Mise en place d'aggr√©garteur via Dockerfile (sch√©mas)
- gestion des liens entre repos
====

== !

image::images/dockers.svg[width=80%]

== !

image::images/docker.svg[width=80%]

== !

image::images/pipeline.svg[]

== !

image::images/pipelines.svg[width=80%]